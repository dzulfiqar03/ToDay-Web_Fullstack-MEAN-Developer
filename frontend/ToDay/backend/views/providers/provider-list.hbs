<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Providers Table</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- DataTables CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"
    />

    <style>
      body {
        background: #f5f7fa;
      }

      .card {
        border-radius: 16px;
        overflow: hidden;
      }

      table thead {
        background: #0d6efd;
        color: white;
      }

      table tbody tr:hover {
        background: #eef5ff;
      }
    </style>
  </head>

  <body>
    <div class="container py-5 d-grid gap-4">
{{> provider-add}}
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h3 class="mb-0">Daftar Provider</h3>
        </div>

        <div class="card-body">
          <table id="providersTable" class="table table-striped table-hover">
            <thead>
              <tr>
                <th>No</th>
                <th>Nama Provider</th>
                <th>Alamat</th>
                <th>Email</th>
                <th>Aksi</th>
              </tr>
            </thead>

            <tbody>
              {{#each providers}}
                <tr>
                  <td>{{this.id}}</td>
                  <td>{{this.name}}</td>
                  <td>{{this.address}}</td>
                  <td>{{this.email}}</td>
                  <td>
                    <a href="/providers/detail/{{this.id}}" class="text-primary">Details</a> |
                   |
                            <a href="/providers/edit/{{this.id}}" class="text-warning">Edit</a> |

                      <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="{{concat '#deleteProviderModal' this.id this.name}}">
          <i class="bi bi-trash"></i> Delete
        </button> 
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>

          <!-- Add Modal -->
{{#each providers}}
  {{> modal
      id=(concat 'deleteProviderModal' this.id this.name)
    title="Delete New Provider"
      body=(concat 'Are you sure you want to delete ' this.name '?')
      showCancel=true
      showSubmit=true
      link=(concat '/providers/delete/' this.id)
      btnText ="Delete"
    submitText="Delete"
  }}
{{/each}}
          <!-- Add Modal -->
{{> modal
    id="addProviderModal"
    title="Add New Provider"
    showCancel=true
    showSubmit=true
    link = "/providers/add"
    submitText="Add"
}}


        </div>
      </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

    <script>
      $(document).ready(function () {
        $('#providersTable').DataTable({
          responsive: true,
          pageLength: 10,
          language: {
            search: "Cari:",
            lengthMenu: "Tampilkan _MENU_ data",
            info: "Menampilkan _START_ sampai _END_ dari _TOTAL_ data",
            paginate: {
              previous: "Sebelumnya",
              next: "Berikutnya"
            }
          }
        });
      });
    </script>

  </body>
</html>
